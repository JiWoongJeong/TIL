[TOC]



## 9. 소프트웨어 개발 보안 구축

### 1. 소프트웨어 개발 보안 설계

#### 1. 소프트웨어 개발 보안 설계

- SW 개발 보안 구성요소

  - 3대 요소 : **기무가**

    |         3대 요소         |                             설명                             |
    | :----------------------: | :----------------------------------------------------------: |
    | 기밀성 (Confidentiality) |                     정보 공개, 노출 차단                     |
    |    무결성 (Integrity)    | 정당 X 시 데이터 변경 X<br />데이터 정확성, 완전성, 고의/악의 변경, 훼손, 파괴 X 보장 |
    |  가용성 (Availability)   |                        지속 사용 보장                        |

  - 용어 : **자위취위**

    |          용어          |                          설명                          |
    | :--------------------: | :----------------------------------------------------: |
    |     자산 (Assets)      |         조직 데이터, 소유자 -> 가치 부여 대상          |
    |     위협 (Threat)      |                   악영향 사건, 행위                    |
    | 취약점 (Vulnerability) | 위협 발생 사전 조건 -> 시스템 보증 낮추는 데 사용 약점 |
    |      위험 (Risk)       |      위협 -> 취약점 이용 => 자산 손실 피해 가능성      |

- 공격기법

  - DoS 공격 

    - 종류

      |               공격기법                |                             설명                             |
      | :-----------------------------------: | :----------------------------------------------------------: |
      |         SYN 플러딩 (Flooding)         | TCP 프로토콜 구조적 문제<br />서버 동시 가용 사용자 수 -> SYN 패킷만 보내서 점유 => 다른 사용자 사용 불가능<br />ACK 발송 X, 새로운 연결 요청 -> 자원 할당 해지 X, 자원 소비 -> 고갈 |
      |              UDP 플러딩               | 대량 UDP 패킷 -> 임의 포트번호 전송 => 응답 메시지 : 지속 자원 고갈 |
      | 스머프 (Smurf)<br />스머핑 (Smurfing) | 출발지 주소 : 공격 대상 IP -> 네트워크 전체에 직접 브로드캐스팅 |
      |            죽음의 핑 (PoD)            | ICMP 패킷 아주 크게 만들어서 전송 -> 다수 IP 단편화<br />단편화 해킷 처리 (재조합) 과정 -> 부하, 재조합 버퍼 오버플로우 |
      |               랜드 어택               | 출발지 IP = 도착지 IP -> 수신자가 자기 자신에게 응답 => 가용성 침해 |
      |               티어 드롭               | IP 패킷 재조합 과정 -> 잘못된 Fragment Offset 정보 => 수신 오류 |
      |    봉크 (Bonk)<br />보잉크 (Boink)    |                   프로토콜 오류 제어 이용                    |

  - DDoS 공격

    - 구성요소 : **HAMAD**

      |        구성요소        |              설명               |
      | :--------------------: | :-----------------------------: |
      |    핸들러 (Handler)    |          마스터 시스템          |
      |        에이전트        |            직접 공격            |
      |         마스터         | 공격자 직접 명령, 에이전트 관리 |
      |   공격자 (Attacker)    |      공격 주도 해커 컴퓨터      |
      | 데몬 프로그램 (Daemon) |          에이전트 역할          |

    - 공격 도구

      - TFN (Tribe Flood Network) : 서비스 거부 공격 

  - DRDos 공격 : 출발지 IP -> 공격대상 IP 위조 => 다수 반사 서버로 요청 정보 전송 / 대상자 : 반사 서버에서 대량 응답 수신

  - 애플리케이션 공격

    - HTTP GET 플러딩 : 과도한 GET 메시지 -> 과부하, HTTP 캐시 옵션 조작 -> 웹 서버 직접 처리 => 웹 서버 자원 소진
    - Slowloris (Slow HTTP Header DoS) : HTTP GET 메서도 -> \r\n\r\n 전송 X, \r\n만 전송 -> 연결상태 장시간 지속
    - RUDY (Slow HTTP POST DoS) : Content-Length 비정상적 크게 설정 -> 바디 소량 => 연결상태 유지
    - Slow HTTP Read DoS : TCP 윈도 크기, 데이터 처리율 감소, HTTP 패킷 지속적 전송 -> 연결상태 장시간 지속
    - Hulk DoS : 공격 대상 URL 지속적 변경 -> GET 요청 다량

  - 네트워크 공격

    - 패스워드 크래킹
      - 사전 크래킹 (Dictionary) : ID PW 가능성 단어 파일로 -> 단어 대입
      - 무차별 크래킹 (Brute Force) : 무작위로 패스워드 자리 대입
      - ARP 스푸핑 : 특정 호스트 MAC 주소 -> 자신 MAC 주소 위조 ARP Reply => ARP Cache Table에 특정 MAC 정보를 공격자 MAC 정보로 변경, 희생자 -> 특정 호스트 나가는 패킷 스니핑
      - ICMP Redirect : 3계층 -> 패킷 흐름 바꾸는 공격 => 특정 목적지로 가는 패킷 스니핑
      - 트로이 목마 : 악성코드 숨어있는 프로그램 -> 실행하면 악성 코드 실행

  - 시스템 보안 위협

    - 버퍼 오버플로우 : 메모리 할당 버퍼 크기 초과 데이터 입력 -> 악성코드 실행
      - 공격 대응 방안
        - 스택가드 : 카나리 (Canary) 무결성 체크용 값 -> 복귀 주소 ~ 변수 사이 삽입 => 오버플로우 발생 시 카나리 값 체크 => 변할 시 복귀 주소 호출 X
        - 스택 쉴드 : 함수 시작 시 복귀 주소 Global RET 특수 스택에 저장 -> 종료 시 저장 값과 스택 RET 비교 => 다를 시 오버플로우 간주, 프로그램 중단
        - ASLR (Address Space Layout Randomization) : 주소 공간 배치 난수화, 실행 시마다 메모리 주소 변경
      - 주요 시스템 보안 공격기법
        - 레이스 컨디션 공격 (Race) : 둘 이상 프로세스, 스레드 공유자원 동시 접근 시 접근 수서에 따라 비정상적 결과 발생 -> 임시 파일 만들 떄 심볼릭 링크하여 악의적 행위 수행
        - 키로거 (Key Logger) : 키보드 움직임 탐지 저장
        - 루트킷 (Rootkit) : 침입 숨기 채 차후 침입 위한 해킹 기능 제공 프로그램 모음
      - 보안 관련 용어
        - 스피어피싱 (Spear Phishing) : 사회 공학, 특정 대상 선정 -> 일반 메일로 위장 => 본문 링크, 첨부 파일 클릭 유도
        - APT 공격 (Advanced Persistent Threat) : 특정 타깃 목표 -> 지속, 지능적 맞춤형 공격 => 특수 목적, 하나 표적
        - 공급망 공격 (Supply Chain) : 소프트웨어 개발사 네트워크 -> 악의적 코드 삽입, 배포 서버 -> 악의적 파일 변경
        - 랜섬웨어 : 감염 파일 암호화 -> 복호화 X, 인질
        - 이블 트윈 공격 : 무선 Wifi 피싱 

- 서비 인증, 접근 통제

  - 인증 기술 유형 : **지소생특**

    |     유형      |   설명    |          예시          |
    | :-----------: | :-------: | :--------------------: |
    | 지식기반 인증 |   지식    |         ID/PW          |
    | 소지기반 인증 |   물품    |    공인인증서, OTP     |
    | 생체기반 인증 | 생체 정보 | 홍채, 정맥, 얼굴, 지문 |
    | 특징기반 인증 |   특징    |   서명, 발걸음, 몸짓   |

  - 접근 통제 기법

    |            구분             |                        설명                         |
    | :-------------------------: | :-------------------------------------------------: |
    |    식별 (Identification)    |           객체에게 주체 : 자신 정보 제공            |
    |    인증 (Authentication)    |             주체 신원 검증 -> 객체 인정             |
    |    인가 (Authorization)     | 인증된 주체에 접근 허용 -> 특정 업무 수행 권리 부여 |
    | 책임추적성 (Accountability) |              주체 접근 추적, 행동 기록              |

  - 서버 접근 통제 유형 : 접근 통제 (Access Control)

    |               유형                |                             설명                             |
    | :-------------------------------: | :----------------------------------------------------------: |
    | 임의적<br />(DAC, Discretionary)  | 사용자/그룹 신분 기반 제한<br />ACL (Access Control List) 수정 -> 권한 부여 |
    |   강제적<br />(MAC, Mandatory)    |      허용 등급 -> 관리자가 부여, 관리자 자원 권한 할당       |
    | 역할 기반<br />(RBAC, Role Based) |   중앙 관리자 -> 사용자 ~ 시스템 상호관계 통제, 역할 기초    |

  - 접근 통제 보호 모델 : **벨기비무**

    - 벨-라파듈라 모델 (BLP, Bell-LaPadula Policy) : 기밀성
    - 비바 모델 : 무결성 보장

- 암호화 알고리즘

  - 방식

    - 양방향

      - 대칭 키 암호 방식 : 암호화 = 복호화 같은 암호 키
        - 블록 암호 방식, 스트림 암호 방식
      - 비대칭 키 암호 방식 : 공개키, 비밀키

    - 일방향 (해시 암호 방식)

      | 종류 |                             설명                             |
      | :--: | :----------------------------------------------------------: |
      | MAC  | 키 사용 메시지 인증 코드 (Message Authentication Code)<br />-> 메시지 무결성, 송신자 인증 보장 |
      | MDC  | 키 사용 X 변경 감지 코드 (Modification Detection Code)<br />-> 메시지 무결성 보장 |

  - 상세

    - 대칭 키
      - DES : 1975년 NIST, 64 bit
      - SEED : 1999년 KISA
      - ARIA : 2004년 국정원 + 산학연구협회
      - AES : 2001년 NIST, 128 bit
    - 비대칭 키
      - RSA (Rivest- Shamir- Adleman) : MIT 교수, 인수 곱 소인수분해 수학적 알고리즘 
      - ECC : 타원 곡선 암호 -> 이산대수
      - Elgamal : 이산대수
    - 해시
      - MD5 (Message-Digest algorithm 5) : 무결성 검사, MD4 대체

- 데이터 암호화 전송

  - IPSec (Internet Protocol Security) : IP 계층 (3계층) 무결성, 인증 보장 인증 헤더 (AH) + 기밀성 보장 암호화 (ESP) -> IP 보안 프로토콜

    - 프로토콜

      |                     프로토콜                      |                             설명                             |
      | :-----------------------------------------------: | :----------------------------------------------------------: |
      |      인증 <br />(AH, Authentication Header)       | 메시지 인증 코드 (MAC) -> 인증, 송신처 인증<br />무결성, 인증 제공 / 기밀성 제공 X |
      | 암호화<br />(ESP, Encapsulation Security Payload) | MAC, 암호화 -> 인증, 송신처 인증 + 기밀성<br />무결성, 인증, 기멀성 제공 |
      |     키 관리<br />(IKE, Internet Key Exchange)     |                Key 주고받는 -> 공개 네트워크                 |

  - SSL (Secure Socket Layer) / TLS (Transport Layer Security) : 전송 계층 (4) ~ 응용 계층 (7) 사이 -> 클라이언트 ~ 서버 간 기밀성, 인증, 무결성 보장 보안 프로토콜

    - 구성 요소

      |          구성 요소          |                    설명                     |
      | :-------------------------: | :-----------------------------------------: |
      | Change Cipher Spec Protocol |     협상 끝난 Cipher Spec 상대에게 알림     |
      |       Alert Protocol        |              경고 메시지 저달               |
      |     Heartbeat Protocol      |               정상 상태 확인                |
      |     Handshake Protocol      | 서버 ~ 클라이언트 서로 인증, 암호화 키 협상 |
      |       Record Protocol       |  합의된 Cipher Suite 암/복호화, 압축, 해제  |

  - S-HTTP (Secure Hytertext Transfer Protocol) : 웹 상 네트워크 트래픽 암호화 -> 전송 모든 메시지 각각 암호화, HTTP 사용 앱만

- 보안 항목 식별

  - 법률 검토 : **개망신**
    - 개인정보 보호법, 정보통신망법, 신용정보법
  - 개인정보 보호법
    - 24조 고유 식별정보 처리제한 : **주여운외**
      - 주민등록번호, 여권번호, 운전면허번호, 외국인등록번호
    - 29조 안전조치 의무화 : **분도유변훼**
      - 분실, 도난, 유출, 변조, 훼손

### 2. 소프트웨어 개발 보안 구현

#### 1. SW 개발 보안 구현

- 시큐어 코딩 가이드 : **입보시 에코캡아**

  |       보안 약점       |                             내용                             |                          대응 방안                           |
  | :-------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
  | 입력데이터 검증, 표현 |          입력값 검증 누락, 부적절 검증, 형식 오지정          |        유효성 검증체계 수립, 실패 시 처리 설계, 구현         |
  |       보안 기능       |       인중/접근 제어, 기밀성, 암호화, 권한 부적절 구현       |                           적적하게                           |
  |      시간, 상태       | 동시 수행 지원 병렬 시스템<br />하나 이상 프로세스 동작<br />부적절 관리 | 공유 자원 접근 직렬화<br />병렬 실행 가능 프레임워크 사용<br />블록문 내에서만 재귀함수 호출 |
  |       에러 처리       |                 에러 메시지에 중요정보 포함                  |                      보안 약점 안생기게                      |
  |       코드 오류       |                                                              | 코딩 규칙 도출<br />-> 검증 가능한 스크립트 도출<br />경고 순위 최상향 조정<br />=> 경고 메시지 코드 제거 |
  |        캡슐화         |   기능성 불충분 캡슐화<br />-> 인가 X 사용자에 데이터 누출   |            디버그 코드 제거, 프라이빗 접근자 지정            |
  |       API 오용        |                의도 반대, 보안 취약 API 사용                 |              취약 APi 확보, 검출 프로그램 사용               |

- 입력 데이터 검증, 표현

  - 취약점

    - 취약점

      - XSS : 검증 X 외부 입력 데이터 포함 웹 페이지 전송 시 -> 열람 => 부적절 스크립트 실행
      - 사이트 간 요청 위조 (CSRF, Cross-Site Request Forgery) : 사용자 의지와 무관하게 공격자 의도 행위 웹 사이트에 공격
      - SQL 삽입

    - XSS (Cross Site Script)

      |              공격 유형               |                             설명                             |
      | :----------------------------------: | :----------------------------------------------------------: |
      |              Stored XSS              |                악성 스크립트 포함 페이지 방문                |
      |            Reflected XSS             |               악성 URL 생성 -> 이메일 => 반사                |
      | DOM XSS<br />(Document Object Model) | DOm 기반 XSS 취약점 브라우저 대상<br />-> 조작 URL 이메일 발송 |

    - SQL 삽입 (Injection) : 보안 취약점 -> 악의적 SQL 구문 삽입, 실행 => DB 접근 : 정보 탈취, 조작

      |    공격 유형     |                             설명                             |
      | :--------------: | :----------------------------------------------------------: |
      |       Form       | HTLM Form 기반 인증 앱 취약점<br />-> 사용 인증 쿼리 문의 조건 조작 => 인증 우회 |
      |      Union       |       UNION 연산자 -> 쿼리 결과 다른 쿼리 결과에 결합        |
      | Stored Procedure |                        저장 프로시저                         |
      |       Mass       |                       대량 DB 값 변조                        |
      |   Error-Based    |             에러 값 기반 -> 점진적 DB 정보 획득              |
      |      Blind       |        참/거짓 -> 의도 X SQL 실행 => DB 비정상적 공격        |

- 코드 오류

  - 취약점 : 널 포인터 역참조, 정수 문자 변환, 부적절한 자원 해제, 초기화 X 변수 사용

- 캡슐화

  - 취약점 : 잘못된 세션, 남은 디버그 코드, 민감한 데이터 가진 내부 클래스 사용, 시스템 데이터 정보 노출

#### 2. 시스템 보안 구현

- 보안 솔루션

  - 네트워크
    - 방화벽 (Firewall) : 내외부 간 트래픽 모니터링 -> 시스템 접근 허용/차단
    - 침입 탐지 시스템 (IDS, Intrusion Detection System) : 네트워크 발생 이벤트 모니터링, 실시간 탐지
    - 네트워크 접근 제어 (NAC, Network Access Control) : 단말기 제어, 통제 
    - 가상사설망 (VPN, Virtual Private Network) : 공중망에 인증, 암호화, 터널링 활용해 전용망 사용하는 것처럼 
  - 시스템
    - 보안 운영체제 : 보안 기능 통합한 보안 커널 추가 OS
  - 콘텐츠 유출 방지
    - 데이터 유출 방지 (DLP, Data Loss Prevention) : 내부 자료가 외부 빠져나가는 것 탐지, 차단

- 취약점 분석

  - 절차 : **자진 제진결보**

    |          절차          |                             설명                             |
    | :--------------------: | :----------------------------------------------------------: |
    |    자산 조사, 분석     |                                                              |
    |     진단 대상 선정     |             자산 작으면 전수 조사 / 크면 샘플링              |
    |     제약사항 확인      |                시간 제약사항 확인, 일정 분배                 |
    |       진단 수행        | 기술적 관점 - 수동 / 자동진단<br />관리적 관점 - 담당자 인터뷰<br />물리적 관점 - 내부 실사 |
    | 결과 분석, 보고서 작성 |                취약점 점수 지정, 결과 값 산출                |

#### 3. SW 개발 보안 테스트와 결함 관리

#### 4. 비즈니스 연속성 계획

- 주요 용어
  - BIA (Business Impact Analysis) : 손실 가정 -> 시간 흐름 영향, 손실 평가 조사하는 BCP 구축 위한 비즈니스 영향 분석
  - RPO (Recovery Point Objective) : 업무 중단 시점부터 데이터 복구 -> 정상 가동 시 데이터 손실 허용 시점, 재해 시 복구 목표 지점 선정
  - RTO (Recovery Time Objective) : 업무 중단 시점 ~ 업무 복구, 재가동 시까지 시간 -> 재해 시 복구 목표 시간 선정
  - DRS (Disaster Recovery System) : 재해복구계획 수행 지원 -> 평소에 확보하는 자원, 지속적 관리체계 통합 재해복구센터
    - Mirror, Hot, Warm, Cold Site

#### 5. 보안 중요 용어

- 공격
  - 부 채널 공격 (Side) : 암호화 알고리즘 실행 시기 물리적 특성 측정 -> 내부 비밀 정보를 부 채널에서 획득
  - 드라이브 바이 다운로드 : 악성 스크립트 설치 -> 의도된 서버로 연결
  - 워터링홀 : 표적 공격 -> 자주 방문 하는 웹 사이트에 악성코드, 배포 URL 유인
  - 하트 블리드 : Heartbeat 확장 모듈 
  - 토르 네트워크 (Tor) : 네트워크 경로 알 수 없도록 암호화 기법 -> 익명으로 인터넷 사용 가능한 가상 네트워크
  - 디렉토리 리스팅 취약점 : 서버 미흡 설정 -> 인덱싱 기능 활성화 시 -> 강제 브라우징 => 서버 내 모든 디렉토리, 파일 열람 가능
  - 스턱스넷 공격 : 지멘스 SCADA 시스템 공격 목표
- 대응
  - 핑거 프린팅 : 멀티미디어 저작권, 구매 사용자 정보 삽입 -> 불법 배포자 위치 추적 
  - CVE (Common Vulnerabilities and Exposures) : MITRE 보안취약점 표준화 식별자 목록
  - CWE (Common Weakness Enumeration) : 공통 취약점 등급 시스템 -> 취약점 위험도 계산 개방형 프레임워크

